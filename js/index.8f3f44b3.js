(function(){"use strict";var e={2478:function(e,t,n){n(6992),n(8674),n(9601),n(7727);var i=n(9242),o=n(3396);const s=e=>((0,o.dD)("data-v-55f3e3ac"),e=e(),(0,o.Cn)(),e),r=s((()=>(0,o._)("ul",null,[(0,o._)("li",null,[(0,o._)("a",{href:"/"},[(0,o._)("img",{class:"logo",src:"/Logo-64.png",alt:"Logo"})])])],-1))),a={class:"nav-links"};function l(e,t){const n=(0,o.up)("router-link"),i=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("header",null,[(0,o._)("nav",null,[r,(0,o._)("ul",a,[(0,o._)("li",null,[(0,o.Wm)(n,{to:"/"},{default:(0,o.w5)((()=>[(0,o.Uk)("Home")])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(n,{to:"/about"},{default:(0,o.w5)((()=>[(0,o.Uk)("About")])),_:1})])])])]),(0,o._)("main",null,[(0,o.Wm)(i,null,{default:(0,o.w5)((({Component:e})=>[((0,o.wg)(),(0,o.j4)(o.Ob,null,[((0,o.wg)(),(0,o.j4)((0,o.LL)(e)))],1024))])),_:1})])],64)}var u=n(89);const h={},p=(0,u.Z)(h,[["render",l],["__scopeId","data-v-55f3e3ac"]]);var d=p,c=(n(3948),n(2483));const f={class:"generator"},m={class:"settings"},g=["value"],y={class:"generator-btns"},v=["href","download"],w={key:1,type:"button",disabled:""};function b(e,t,n,i,s,r){var a;const l=(0,o.up)("GeneratorSettings"),u=(0,o.up)("StlViewer"),h=(0,o.up)("ModalWindow");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",f,[(0,o._)("div",m,[(0,o._)("label",null,[(0,o.Uk)(" Image "),(0,o._)("input",{type:"file",onChange:t[0]||(t[0]=(...t)=>e.loadFile&&e.loadFile(...t)),accept:".jpeg,.jpg,.png,.gif"},null,32)]),(0,o.Wm)(l,{xExpression:e.xExpression,"onUpdate:xExpression":t[1]||(t[1]=t=>e.xExpression=t),yExpression:e.yExpression,"onUpdate:yExpression":t[2]||(t[2]=t=>e.yExpression=t),zExpression:e.zExpression,"onUpdate:zExpression":t[3]||(t[3]=t=>e.zExpression=t),onUpdatePreview:t[4]||(t[4]=t=>{e.generatePreview(100),e.maybeShowLithophane()}),imageWidth:e.imageWidth,imageHeight:e.imageHeight},null,8,["xExpression","yExpression","zExpression","imageWidth","imageHeight"]),(0,o._)("label",null,[(0,o.Uk)(" File Size: "),(0,o._)("input",{disabled:"",value:null===e.lithophaneSize?null:e.prettyBytes(e.lithophaneSize)},null,8,g)]),(0,o._)("div",y,[(0,o._)("button",{type:"button",onClick:t[5]||(t[5]=(...t)=>e.generateLithophane&&e.generateLithophane(...t))},"Generate Lithophane"),e.showLithophane&&null!==e.lithophaneUrl?((0,o.wg)(),(0,o.iD)("a",{key:0,role:"button",href:e.lithophaneUrl,download:`${null===(a=e.file)||void 0===a?void 0:a.name.split(".").slice(0,-1).join(".")}.stl`}," Download Lithophane ",8,v)):((0,o.wg)(),(0,o.iD)("button",w,"Download Lithophane"))])]),(0,o.Wm)(u,{class:"model-viewer",stl:e.stlModel,color:e.stlColor,doubleSided:e.stlDoubleSided},null,8,["stl","color","doubleSided"])]),(0,o.Wm)(h,{show:e.showSizeWarningModal,onClose:t[6]||(t[6]=t=>e.showSizeWarningModal=!1)},{title:(0,o.w5)((()=>[(0,o.Uk)(" Large Image ")])),body:(0,o.w5)((()=>[(0,o.Uk)(" Large images can cause the lithophane to take much longer to generate, and can increase the STL file size significantly. Using higher resolution images for lithophanes quickly runs into diminishing returns, since 3D printers can only achieve so much detail. Consider lowering the resolution of your image before using it to generate a lithophane. ")])),_:1},8,["show"])],64)}n(285),n(1637),n(8264),n(9575),n(2472),n(8675),n(3105),n(3408),n(2958),n(3462),n(3824),n(2974),n(3767),n(8585),n(8696);const x={class:"config-preset-container"},_={class:"config-presets"},E={class:"config-preset-settings"},z=["value","disabled"],k=["value","disabled"],W=["value","disabled"];function S(e,t,n,i,s,r){const a=(0,o.up)("VerticalSlideTransition");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",x,[(0,o._)("div",_,[(0,o._)("button",{type:"button",onClick:t[0]||(t[0]=t=>e.settingsType="RectangleSettings")},"Rectangle"),(0,o._)("button",{type:"button",onClick:t[1]||(t[1]=t=>e.settingsType="CylinderCurveSettings")},"Cylinder Curve"),(0,o._)("button",{type:"button",onClick:t[2]||(t[2]=t=>e.settingsType=null)},"Custom")]),((0,o.wg)(),(0,o.j4)(o.Ob,null,[(0,o.Wm)(a,{showIf:null!==e.settingsType,hide:!0,mode:"out-in"},{default:(0,o.w5)((()=>[(0,o._)("div",E,[((0,o.wg)(),(0,o.j4)(o.Ob,null,[((0,o.wg)(),(0,o.j4)((0,o.LL)(e.settingsType),{imageWidth:e.imageWidth,imageHeight:e.imageHeight,"onUpdate:xExpression":t[3]||(t[3]=t=>e.$emit("update:xExpression",t)),"onUpdate:yExpression":t[4]||(t[4]=t=>e.$emit("update:yExpression",t)),"onUpdate:zExpression":t[5]||(t[5]=t=>e.$emit("update:zExpression",t)),onUpdatePreview:t[6]||(t[6]=t=>e.$emit("updatePreview"))},null,40,["imageWidth","imageHeight"]))],1024))])])),_:1},8,["showIf"])],1024))]),(0,o._)("label",null,[(0,o.Uk)(" X Expression: "),(0,o._)("input",{value:e.xExpression,disabled:null!==e.settingsType,onInput:t[7]||(t[7]=t=>e.$emit("update:xExpression",t.target.value)),onFocusout:t[8]||(t[8]=t=>e.$emit("updatePreview"))},null,40,z)]),(0,o._)("label",null,[(0,o.Uk)(" Y Expression: "),(0,o._)("input",{value:e.yExpression,disabled:null!==e.settingsType,onInput:t[9]||(t[9]=t=>e.$emit("update:yExpression",t.target.value)),onFocusout:t[10]||(t[10]=t=>e.$emit("updatePreview"))},null,40,k)]),(0,o._)("label",null,[(0,o.Uk)(" Z Expression: "),(0,o._)("input",{value:e.zExpression,disabled:null!==e.settingsType,onInput:t[11]||(t[11]=t=>e.$emit("update:zExpression",t.target.value)),onFocusout:t[12]||(t[12]=t=>e.$emit("updatePreview"))},null,40,W)])],64)}var U=n(1801);const $={class:"horizontal-fieldset"},P=(0,o._)("legend",null,"Plane:",-1),R=["value"],L=["value"];function H(e,t,n,s,r,a){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("fieldset",$,[P,(0,o._)("label",null,[(0,o.wy)((0,o._)("input",{type:"radio",value:"xy","onUpdate:modelValue":t[0]||(t[0]=t=>e.plane=t),onFocusout:t[1]||(t[1]=t=>e.$emit("updatePreview"))},null,544),[[i.G2,e.plane]]),(0,o.Uk)(" XY ")]),(0,o._)("label",null,[(0,o.wy)((0,o._)("input",{type:"radio",value:"xz","onUpdate:modelValue":t[2]||(t[2]=t=>e.plane=t),onFocusout:t[3]||(t[3]=t=>e.$emit("updatePreview"))},null,544),[[i.G2,e.plane]]),(0,o.Uk)(" XZ ")]),(0,o._)("label",null,[(0,o.wy)((0,o._)("input",{type:"radio",value:"yz","onUpdate:modelValue":t[4]||(t[4]=t=>e.plane=t),onFocusout:t[5]||(t[5]=t=>e.$emit("updatePreview"))},null,544),[[i.G2,e.plane]]),(0,o.Uk)(" YZ ")])]),(0,o._)("label",null,[(0,o.Uk)(" Horizontal Resolution (mm/px): "),(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=t=>e.hRes=t),onInput:t[7]||(t[7]=(...t)=>e.recalculate&&e.recalculate(...t)),onFocusout:t[8]||(t[8]=t=>e.$emit("updatePreview"))},null,544),[[i.nr,e.hRes]])]),(0,o._)("label",null,[(0,o.Uk)(" Vertical Resolution (mm/px): "),(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=t=>e.vRes=t),onInput:t[10]||(t[10]=(...t)=>e.recalculate&&e.recalculate(...t)),onFocusout:t[11]||(t[11]=t=>e.$emit("updatePreview"))},null,544),[[i.nr,e.vRes]])]),(0,o._)("label",null,[(0,o.Uk)(" Width (mm): "),(0,o._)("input",{type:"number",disabled:"",value:e.width,onFocusout:t[12]||(t[12]=t=>e.$emit("updatePreview"))},null,40,R)]),(0,o._)("label",null,[(0,o.Uk)(" Height (mm): "),(0,o._)("input",{type:"number",disabled:"",value:e.height,onFocusout:t[13]||(t[13]=t=>e.$emit("updatePreview"))},null,40,L)])],64)}n(1703);function C(e){if(!e)throw new Error("Assertion failed")}function O(e,t){var n;return t=null!==(n=t)&&void 0!==n?n:0,Math.round((e+Number.EPSILON)*10**t)/10**t}function A(e,t){return t in e}var j=(0,o.aZ)({props:{imageWidth:{type:Number},imageHeight:{type:Number}},data(){return{plane:"yz",hRes:.1,vRes:.1}},activated(){this.recalculate()},computed:{imgXAxis(){return{xy:"x",xz:"x",yz:"y"}[this.plane]},imgYAxis(){return{xy:"y",xz:"z",yz:"z"}[this.plane]},imgDepthAxis(){return{xy:"z",xz:"y",yz:"x"}[this.plane]},width(){return this.imageWidth?O((this.imageWidth-1)*this.hRes,4):null},height(){return this.imageHeight?O((this.imageHeight-1)*this.vRes,4):null}},methods:{recalculate(){const e={x:"",y:"",z:""};e[this.imgDepthAxis]="0",e[this.imgXAxis]="x/"+1/this.hRes,e[this.imgYAxis]="(h-y-1)/"+1/this.vRes,this.$emit("update:xExpression",e.x),this.$emit("update:yExpression",e.y),this.$emit("update:zExpression",e.z)}},emits:["update:xExpression","update:yExpression","update:zExpression","updatePreview"],watch:{plane(){this.recalculate()}}});const I=(0,u.Z)(j,[["render",H]]);var T=I,D=n(7139);const M={class:"horizontal-fieldset"},F=(0,o._)("legend",null,"Axis of Rotation:",-1),Z=["value"],B=["value"],V=["value"],Y=["value"],N=["value"];function q(e,t,n,s,r,a){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("fieldset",M,[F,(0,o._)("label",null,[(0,o.wy)((0,o._)("input",{type:"radio",value:"x","onUpdate:modelValue":t[0]||(t[0]=t=>e.axisOfRotation=t),onChange:t[1]||(t[1]=(...t)=>e.recalculate&&e.recalculate(...t)),onFocusout:t[2]||(t[2]=t=>e.$emit("updatePreview"))},null,544),[[i.G2,e.axisOfRotation]]),(0,o.Uk)(" X ")]),(0,o._)("label",null,[(0,o.wy)((0,o._)("input",{type:"radio",value:"y","onUpdate:modelValue":t[3]||(t[3]=t=>e.axisOfRotation=t),onChange:t[4]||(t[4]=(...t)=>e.recalculate&&e.recalculate(...t)),onFocusout:t[5]||(t[5]=t=>e.$emit("updatePreview"))},null,544),[[i.G2,e.axisOfRotation]]),(0,o.Uk)(" Y ")]),(0,o._)("label",null,[(0,o.wy)((0,o._)("input",{type:"radio",value:"z","onUpdate:modelValue":t[6]||(t[6]=t=>e.axisOfRotation=t),onChange:t[7]||(t[7]=(...t)=>e.recalculate&&e.recalculate(...t)),onFocusout:t[8]||(t[8]=t=>e.$emit("updatePreview"))},null,544),[[i.G2,e.axisOfRotation]]),(0,o.Uk)(" Z ")])]),(0,o._)("label",null,[(0,o.Uk)(" Horizontal Resolution (mm/px): "),(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=t=>e.hRes=t),onInput:t[10]||(t[10]=(...t)=>e.recalculate&&e.recalculate(...t)),onFocusout:t[11]||(t[11]=t=>e.$emit("updatePreview"))},null,544),[[i.nr,e.hRes]])]),(0,o._)("label",null,[(0,o.Uk)(" Vertical Resolution (mm/px): "),(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=t=>e.vRes=t),onInput:t[13]||(t[13]=(...t)=>e.recalculate&&e.recalculate(...t)),onFocusout:t[14]||(t[14]=t=>e.$emit("updatePreview"))},null,544),[[i.nr,e.vRes]])]),(0,o._)("label",null,[(0,o.Uk)(" Arc (degrees): "+(0,D.zw)(e.arc)+" ",1),(0,o.wy)((0,o._)("input",{type:"range",min:"1",max:"360","onUpdate:modelValue":t[15]||(t[15]=t=>e.arc=t),onInput:t[16]||(t[16]=(...t)=>e.recalculate&&e.recalculate(...t)),onFocusout:t[17]||(t[17]=t=>e.$emit("updatePreview"))},null,544),[[i.nr,e.arc]])]),(0,o._)("label",null,[(0,o.Uk)(" Inner Radius (mm): "),(0,o._)("input",{type:"number",disabled:"",value:e.round(e.radius,4)},null,8,Z)]),(0,o._)("label",null,[(0,o.Uk)(" Inner Arc Length (mm): "),(0,o._)("input",{type:"number",disabled:"",value:e.round(e.arcLength,4)},null,8,B)]),(0,o._)("label",null,[(0,o.Uk)(" Inner Width (mm): "),(0,o._)("input",{type:"number",disabled:"",value:e.round(e.width,4)},null,8,V)]),(0,o._)("label",null,[(0,o.Uk)(" Inner Depth (mm): "),(0,o._)("input",{type:"number",disabled:"",value:e.round(e.depth,4)},null,8,Y)]),(0,o._)("label",null,[(0,o.Uk)(" Height (mm): "),(0,o._)("input",{type:"number",disabled:"",value:e.round(e.height,4)},null,8,N)])],64)}var G=(0,o.aZ)({props:{imageWidth:{type:Number},imageHeight:{type:Number}},data(){return{axisOfRotation:"z",hRes:.1,vRes:.1,arc:120,recalculations:0}},activated(){this.recalculate()},computed:{firstAxis(){return{x:"y",y:"z",z:"x"}[this.axisOfRotation]},secondAxis(){return{x:"z",y:"x",z:"y"}[this.axisOfRotation]},radius(){return this.imageWidth?180*(this.imageWidth-1)/this.arc/Math.PI*this.hRes:null},arcLength(){return this.imageWidth?(this.imageWidth-1)*this.hRes:null},width(){return this.imageWidth&&null!==this.radius?this.arc<=180?2*this.radius*Math.sin(this.arc/2/180*Math.PI):2*this.radius:null},depth(){return this.imageWidth&&null!==this.radius?this.radius*(1-Math.cos(this.arc/2/180*Math.PI)):null},height(){return this.imageHeight?(this.imageHeight-1)*this.vRes:null}},methods:{recalculate(){const e={x:"",y:"",z:""},t=`pi*(x/(w-1)*${this.arc} + ${(180-this.arc)/2})/180`,n=`(w-1)*180/${this.arc}/pi/${1/this.hRes}`;this.arc<180?e[this.firstAxis]=`(sin(${t}) - sin(pi*${(180-this.arc)/2}/180))*${n}`:e[this.firstAxis]=`sin(${t})*${n}`,e[this.secondAxis]=`-cos(${t})*${n}`,e[this.axisOfRotation]="(h-y-1)/"+1/this.vRes,this.$emit("update:xExpression",e.x),this.$emit("update:yExpression",e.y),this.$emit("update:zExpression",e.z)},round:O},emits:["update:xExpression","update:yExpression","update:zExpression","updatePreview"]});const X=(0,u.Z)(G,[["render",q]]);var K=X;const J={key:0,ref:"el",class:"slide-container"};function Q(e,t,n,s,r,a){return(0,o.wg)(),(0,o.j4)(i.uT,{name:"slide-transition"},{default:(0,o.w5)((()=>[e.showIf||e.hide?(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",J,[(0,o.WI)(e.$slots,"default",{},void 0,!0)],512)),[[i.F8,e.showIf||!e.hide]]):(0,o.kq)("",!0)])),_:3})}const ee=(0,o.aZ)({props:{showIf:{type:Boolean,required:!0},hide:{type:Boolean,default:!1}},watch:{async showIf(e){e&&await(0,o.Y3)();const t=this.$refs.el;C(t instanceof HTMLDivElement),t.style.setProperty("--transition-height",`${t.scrollHeight}px`)}}});var te=ee;const ne=(0,u.Z)(te,[["render",Q],["__scopeId","data-v-7a9e58ec"]]);var ie=ne;const oe={RectangleSettings:T,CylinderCurveSettings:K};var se=(0,o.aZ)({components:(0,U.Z)((0,U.Z)({},oe),{},{VerticalSlideTransition:ie}),props:{xExpression:{type:String,default:""},yExpression:{type:String,default:""},zExpression:{type:String,default:""},imageWidth:{type:Number},imageHeight:{type:Number}},data(){return{settingsType:"RectangleSettings"}},emits:["update:xExpression","update:yExpression","update:zExpression","updatePreview"],watch:{async settingsType(){await(0,o.Y3)(),this.$emit("updatePreview")}}});const re=(0,u.Z)(se,[["render",S],["__scopeId","data-v-e32718e0"]]);var ae=re;const le={class:"stl-viewer"};function ue(e,t,n,i,s,r){const a=(0,o.up)("Camera"),l=(0,o.up)("PointLight"),u=(0,o.up)("AmbientLight"),h=(0,o.up)("StlMesh"),p=(0,o.up)("AxesHelper"),d=(0,o.up)("Scene"),c=(0,o.up)("Renderer");return(0,o.wg)(),(0,o.iD)("div",le,[(0,o.Wm)(c,{orbitCtrl:"",resize:""},{default:(0,o.w5)((()=>[(0,o.Wm)(a,{position:{x:100,y:100,z:100}}),(0,o.Wm)(d,{background:"#000000"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{color:"#ffffff",position:{x:5e5,y:5e5,z:5e5},intensity:.25}),(0,o.Wm)(l,{color:"#ffffff",position:{x:5e5,y:-5e5,z:5e5},intensity:.25}),(0,o.Wm)(l,{color:"#ffffff",position:{x:-5e5,y:5e5,z:5e5},intensity:.25}),(0,o.Wm)(l,{color:"#ffffff",position:{x:-5e5,y:-5e5,z:5e5},intensity:.25}),(0,o.Wm)(u,{color:"#202020"}),null!==e.stlBuffer?((0,o.wg)(),(0,o.j4)(h,{key:[e.stlBuffer,e.color,e.doubleSided],model:e.stlBuffer,color:e.color,doubleSided:e.doubleSided},null,8,["model","color","doubleSided"])):(0,o.kq)("",!0),(0,o.Wm)(p,{size:1e6})])),_:1})])),_:1})])}var he=n(2904),pe=n(1114),de=(0,o.aZ)({extends:he.Tm,props:{size:{type:Number}},mounted(){const e=new pe.y8_(this.size);this.initObject3D(e)}}),ce=n(8281),fe=(0,o.aZ)({extends:he.Kj,props:{model:{type:ArrayBuffer,required:!0},color:{type:String,default:"#ffffff"},doubleSided:{type:Boolean,default:!1}},setup(e){const t=new ce.j,n=t.parse(e.model);return{geometry:n,material:new pe.Wid({color:e.color,side:e.doubleSided?pe.ehD:pe.Wl3})}}}),me=(0,o.aZ)({components:{Renderer:he.Th,Camera:he.V1,Scene:he.xs,AmbientLight:he.Mi,PointLight:he.ce,StlMesh:fe,AxesHelper:de},props:{stl:{type:Object},color:{type:String,default:"#ffffff"},doubleSided:{type:Boolean,default:!1}},computed:{stlBuffer(){return"undefined"===typeof this.stl||null===this.stl?null:this.stl.buffer.slice(this.stl.byteOffset,this.stl.byteLength+this.stl.byteOffset)}}});const ge=(0,u.Z)(me,[["render",ue]]);var ye=ge;const ve={key:0,open:""};function we(e,t,n,s,r,a){return(0,o.wg)(),(0,o.j4)(o.lR,{to:e.teleportTo,disabled:e.noTeleport},[(0,o.Wm)(i.uT,{appear:"",name:"modal-slide-fade"},{default:(0,o.w5)((()=>[e.show?((0,o.wg)(),(0,o.iD)("dialog",ve,[(0,o._)("article",null,[(0,o._)("header",null,[(0,o._)("h3",null,[(0,o.WI)(e.$slots,"title",{},void 0,!0)]),(0,o._)("button",{type:"button",class:"btn-close-icon","aria-label":"Close",onClick:t[0]||(t[0]=t=>e.$emit("close"))})]),(0,o._)("main",null,[(0,o.WI)(e.$slots,"body",{},void 0,!0)]),(0,o._)("footer",null,[(0,o.WI)(e.$slots,"footer",{},(()=>[(0,o._)("button",{type:"button",class:"btn-close",onClick:t[1]||(t[1]=t=>e.$emit("close"))},"Close")]),!0)])])])):(0,o.kq)("",!0)])),_:3})],8,["to","disabled"])}var be=(0,o.aZ)({props:{teleportTo:{type:String,default:"body"},noTeleport:{type:Boolean,default:!1},show:{type:Boolean,default:!1}},emits:["close"]});const xe=(0,u.Z)(be,[["render",we],["__scopeId","data-v-30a403d4"]]);var _e=xe,Ee=n(4958),ze=(0,o.aZ)({components:{GeneratorSettings:ae,StlViewer:ye,ModalWindow:_e},data(){return{file:null,xExpression:"0",yExpression:"x/10",zExpression:"(h-y-1)/10",imageWidth:void 0,imageHeight:void 0,imageData:void 0,showSizeWarningModal:!1,wasm:null,lithophane:null,showLithophane:!1,generated_expressions:null,preview:null}},computed:{previewWidth(){return"undefined"!==typeof this.imageWidth?this.imageWidth:500},previewHeight(){return"undefined"!==typeof this.imageHeight?this.imageHeight:500},expressionsChanged(){return null===this.generated_expressions||this.xExpression!==this.generated_expressions[0]||this.yExpression!==this.generated_expressions[1]||this.zExpression!==this.generated_expressions[2]},showLithophaneAfterChange(){return null!==this.lithophane&&!this.expressionsChanged},stlModel(){return this.showLithophane?this.lithophane:this.preview},stlColor(){return this.showLithophane?"#ffffff":"#0000ff"},stlDoubleSided(){return!this.showLithophane},lithophaneUrl(){return null===this.lithophane?null:URL.createObjectURL(new Blob([this.lithophane],{type:"application/sla"}))},lithophaneSize(){if("undefined"===typeof this.imageWidth||"undefined"===typeof this.imageHeight)return null;const e=this.imageWidth-1,t=this.imageHeight-1;return 2*(e*t*2+2*e+2*t)*50+84}},methods:{loadFile(e){var t,n;if(e.target instanceof HTMLInputElement)if(1===(null===(t=e.target)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)){const t=e.target.files[0],n=new FileReader;n.onerror=e=>{alert(`Error reading file: ${e}`)},n.onload=e=>{C(null!==e.target&&e.target.result instanceof ArrayBuffer),C(null!==this.wasm),this.imageData=new Uint8Array(e.target.result);const n=this.wasm.get_image_dimensions(this.imageData);this.imageWidth=n.width,this.imageHeight=n.height,this.imageWidth*this.imageHeight>1e6&&(this.showSizeWarningModal=!0),n.free(),this.generatePreview(100),this.file=t,this.lithophane=null},n.readAsArrayBuffer(t)}else this.imageWidth=void 0,this.imageHeight=void 0},generateLithophane(){if(null!==this.file)if(this.imageData){C(null!==this.wasm);try{const e=this.wasm.generate_lithophane(this.xExpression,this.yExpression,this.zExpression,this.imageData,.5,3);this.lithophane=e,this.generated_expressions=[this.xExpression,this.yExpression,this.zExpression],this.showLithophane=!0}catch(e){console.error(e),"object"===typeof e&&null!==e&&A(e,"message")&&alert(e.message)}}else alert("file not read");else alert("select a file")},generatePreview(e){if(this.preview=null,null===this.wasm)return;const t=Math.ceil(Math.max(this.previewWidth,this.previewHeight)/e);try{this.preview=this.wasm.generate_preview(this.xExpression,this.yExpression,this.zExpression,this.previewWidth,this.previewHeight,t),this.showLithophane=!1}catch(n){console.error(n)}},maybeShowLithophane(){this.showLithophaneAfterChange&&(this.showLithophane=!0)},prettyBytes:Ee.Z},watch:{xExpression(){this.generatePreview(20)},yExpression(){this.generatePreview(20)},zExpression(){this.generatePreview(20)}},mounted(){n.e(694).then(n.bind(n,8694)).then((e=>{e.init(),this.wasm=e,this.generatePreview(100)})).catch(console.error)}});const ke=(0,u.Z)(ze,[["render",b],["__scopeId","data-v-0767390c"]]);var We=ke;const Se=[{path:"/",name:"home",component:We},{path:"/about",name:"about",component:()=>n.e(443).then(n.bind(n,1676))}],Ue=(0,c.p7)({history:(0,c.r5)(),routes:Se});var $e=Ue;pe.Tme.DEFAULT_UP=new pe.Pa4(0,0,1),(0,i.ri)(d).use($e).mount("body")}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i](s,s.exports,n),s.loaded=!0,s.exports}n.m=e,function(){var e="function"===typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"===typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",i="function"===typeof Symbol?Symbol("webpack error"):"__webpack_error__",o=function(e){e&&!e.d&&(e.d=1,e.forEach((function(e){e.r--})),e.forEach((function(e){e.r--?e.r++:e()})))},s=function(n){return n.map((function(n){if(null!==n&&"object"===typeof n){if(n[e])return n;if(n.then){var s=[];s.d=0,n.then((function(e){r[t]=e,o(s)}),(function(e){r[i]=e,o(s)}));var r={};return r[e]=function(e){e(s)},r}}var a={};return a[e]=function(){},a[t]=n,a}))};n.a=function(n,r,a){var l;a&&((l=[]).d=1);var u,h,p,d=new Set,c=n.exports,f=new Promise((function(e,t){p=t,h=e}));f[t]=c,f[e]=function(e){l&&e(l),d.forEach(e),f["catch"]((function(){}))},n.exports=f,r((function(n){var o;u=s(n);var r=function(){return u.map((function(e){if(e[i])throw e[i];return e[t]}))},a=new Promise((function(t){o=function(){t(r)},o.r=0;var n=function(e){e!==l&&!d.has(e)&&(d.add(e),e&&!e.d&&(o.r++,e.push(o)))};u.map((function(t){t[e](n)}))}));return o.r?a:r()}),(function(e){e?p(f[i]=e):h(c),o(l)})),l&&(l.d=0)}}(),function(){var e=[];n.O=function(t,i,o,s){if(!i){var r=1/0;for(h=0;h<e.length;h++){i=e[h][0],o=e[h][1],s=e[h][2];for(var a=!0,l=0;l<i.length;l++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[l])}))?i.splice(l--,1):(a=!1,s<r&&(r=s));if(a){e.splice(h--,1);var u=o();void 0!==u&&(t=u)}}return t}s=s||0;for(var h=e.length;h>0&&e[h-1][2]>s;h--)e[h]=e[h-1];e[h]=[i,o,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+(443===e?"about":e)+"."+{443:"252b958d",694:"df442e7d"}[e]+".js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="lithophane-generator-vue:";n.l=function(i,o,s,r){if(e[i])e[i].push(o);else{var a,l;if(void 0!==s)for(var u=document.getElementsByTagName("script"),h=0;h<u.length;h++){var p=u[h];if(p.getAttribute("src")==i||p.getAttribute("data-webpack")==t+s){a=p;break}}a||(l=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=i),e[i]=[o];var d=function(t,n){a.onerror=a.onload=null,clearTimeout(c);var o=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(e){return e(n)})),t)return t(n)},c=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.v=function(e,t,i,o){var s=fetch(n.p+""+i+".module.wasm");return"function"===typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(s,o).then((function(t){return Object.assign(e,t.instance.exports)})):s.then((function(e){return e.arrayBuffer()})).then((function(e){return WebAssembly.instantiate(e,o)})).then((function(t){return Object.assign(e,t.instance.exports)}))}}(),function(){n.p="/"}(),function(){var e={826:0};n.f.j=function(t,i){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)i.push(o[2]);else{var s=new Promise((function(n,i){o=e[t]=[n,i]}));i.push(o[2]=s);var r=n.p+n.u(t),a=new Error,l=function(i){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var s=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",a.name="ChunkLoadError",a.type=s,a.request=r,o[1](a)}};n.l(r,l,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,s,r=i[0],a=i[1],l=i[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(l)var h=l(n)}for(t&&t(i);u<r.length;u++)s=r[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(h)},i=self["webpackChunklithophane_generator_vue"]=self["webpackChunklithophane_generator_vue"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(2478)}));i=n.O(i)})();
//# sourceMappingURL=index.8f3f44b3.js.map